<% if (upload = f.object.upload_for(field)) && file_attached?(upload) %>
  <div class="current-document">
    <h3>Currently uploaded file:</h3>

    <span class="icon" aria-hidden="true"></span>
    <div class="uploaded-file">
      <span class="file-name"><%= upload.original_filename %></span>

      <% if file_clean?(upload) %>
        <div class="download-action">
          <%= link_to 'Download file', upload.document.url, target: '_blank' %>
        </div>
      <% else %>
        <span class="scan-status">
          <%= upload.scan_status_text %>
        </span>
      <% end %>

      <div class="remove-file-action" data-module="remove-file">
        <%= f.input "remove_#{field}", as: :boolean, label: "Remove file", wrapper: false, include_hidden: false %>
      </div>
    </div>
  </div>
<% else %>
  <%= f.input "#{field}_file", as: :file, label: 'Upload a file' %>
<% end %>
